<div class="sitter-profile-container">
  <div class="sitter-profile-card">
    <div class="sitter-profile-header">
      <div class="logo-container">
        <img src="assets/logo.png" alt="EvPeti Logo" class="logo" (click)="goHome()">
      </div>
      <h1>{{ isEditMode ? '🏠 İlan Düzenle' : '🏠 Bakıcı Profili Oluştur' }}</h1>
      <p>{{ isEditMode ? 'Bakıcılık ilanınızı güncelleyin' : 'Bakıcılık hizmetiniz için ilan oluşturun' }}</p>
    </div>

    <form class="sitter-profile-form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="title">İlan Başlığı *</label>
        <input 
          type="text" 
          id="title" 
          name="title" 
          [(ngModel)]="listingForm.title" 
          required 
          placeholder="İlan başlığını girin">
      </div>

      <div class="form-group">
        <label for="type">Hayvan Türü *</label>
        <select 
          id="type" 
          name="type" 
          [(ngModel)]="listingForm.type" 
          required>
          <option value="">Hayvan türü seçin</option>
          <option value="Köpek">Köpek</option>
          <option value="Kedi">Kedi</option>
          <option value="Kuş">Kuş</option>
          <option value="Balık">Balık</option>
          <option value="Hamster">Hamster</option>
          <option value="Tavşan">Tavşan</option>
          <option value="Diğer">Diğer</option>
        </select>
      </div>

      <div class="form-group">
        <label for="price">Günlük Ücret (TL) *</label>
        <input 
          type="number" 
          id="price" 
          name="price" 
          [(ngModel)]="listingForm.price" 
          required 
          min="0" 
          step="0.01" 
          placeholder="Günlük ücret">
      </div>

      <div class="form-group">
        <label for="location">Konum *</label>
        <input 
          type="text" 
          id="location" 
          name="location" 
          [(ngModel)]="listingForm.location" 
          required 
          placeholder="Şehir/İlçe bilgisi">
      </div>

      <div class="form-group">
        <label for="experience">Deneyim (Yıl)</label>
        <input 
          type="number" 
          id="experience" 
          name="experience" 
          [(ngModel)]="listingForm.experience" 
          min="0" 
          max="50" 
          placeholder="Deneyim yılı">
      </div>

      <div class="form-group">
        <label for="startDate">Başlangıç Tarihi *</label>
        <input 
          type="date" 
          id="startDate" 
          name="startDate" 
          [(ngModel)]="listingForm.startDate" 
          required>
      </div>

      <div class="form-group">
        <label for="endDate">Bitiş Tarihi *</label>
        <input 
          type="date" 
          id="endDate" 
          name="endDate" 
          [(ngModel)]="listingForm.endDate" 
          required>
      </div>

      <div class="form-group">
        <label for="services">Hizmet Türleri</label>
        <textarea 
          id="services" 
          name="services" 
          [(ngModel)]="listingForm.services" 
          rows="2" 
          placeholder="Ev bakıcılığı, günlük bakım, gece bakımı vb."></textarea>
      </div>

      <div class="form-group">
        <label for="description">Hizmet Açıklaması</label>
        <textarea 
          id="description" 
          name="description" 
          [(ngModel)]="listingForm.description" 
          rows="5" 
          placeholder="Deneyimleriniz, özel hizmetleriniz, ev ortamınız hakkında bilgi verin..."></textarea>
      </div>

      <div class="form-group">
        <label for="isAvailable">Müsaitlik Durumu</label>
        <select id="isAvailable" name="isAvailable" [(ngModel)]="listingForm.isAvailable">
          <option [ngValue]="true">Aktif (Müsait)</option>
          <option [ngValue]="false">Pasif (Müsait Değil)</option>
        </select>
      </div>

      <div class="form-group">
        <label for="imageUrls">Ev Fotoğrafları (URL)</label>
        <div class="image-url-container">
          <!-- Mevcut fotoğraflar -->
          <div class="existing-images" *ngIf="listingForm.imageUrls && listingForm.imageUrls.length > 0">
            <div class="image-item" *ngFor="let imageUrl of listingForm.imageUrls; let i = index">
              <img [src]="imageUrl" alt="Ev fotoğrafı" class="preview-image">
              <button type="button" class="remove-image-btn" (click)="removeExistingImage(i)" title="Fotoğrafı kaldır">
                ✕
              </button>
            </div>
          </div>
          
          <!-- Yeni fotoğraf URL ekleme -->
          <div class="url-input-area" *ngIf="listingForm.imageUrls.length < 5">
            <div class="url-input-group">
              <input 
                type="url" 
                id="newImageUrl" 
                name="newImageUrl" 
                [(ngModel)]="newImageUrl" 
                placeholder="Fotoğraf URL'si girin (örn: https://example.com/photo.jpg)"
                class="url-input">
              <button 
                type="button" 
                class="add-url-btn" 
                (click)="addImageUrl()" 
                [disabled]="!newImageUrl || newImageUrl.trim() === ''">
                Ekle
              </button>
            </div>
            <small class="url-help">En fazla 5 fotoğraf ekleyebilirsiniz</small>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="isActive">Durum</label>
        <select id="isActive" name="isActive" [(ngModel)]="listingForm.isActive">
          <option [ngValue]="true">Aktif</option>
          <option [ngValue]="false">Pasif</option>
        </select>
      </div>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage">
        <div class="error-icon">⚠️</div>
        <p>{{ errorMessage }}</p>
      </div>

      <!-- Success Message -->
      <div class="success-message" *ngIf="successMessage">
        <div class="success-icon">✅</div>
        <p>{{ successMessage }}</p>
      </div>

      <div class="form-buttons">
        <button type="button" class="cancel-btn" (click)="onCancel()">
          İptal
        </button>
        <button type="submit" class="submit-btn" [disabled]="isLoading">
          <span *ngIf="!isLoading">{{ isEditMode ? 'Güncelle' : 'İlan Oluştur' }}</span>
          <span *ngIf="isLoading" class="loading-text">{{ isEditMode ? 'Güncelleniyor...' : 'Oluşturuluyor...' }}</span>
        </button>
      </div>
    </form>
  </div>
</div> 