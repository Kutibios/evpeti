<div class="sitter-profile-container">
  <div class="sitter-profile-card">
    <div class="sitter-profile-header">
      <div class="logo-container">
        <img src="assets/logo.png" alt="EvPeti Logo" class="logo" (click)="goHome()">
      </div>
      <h1>{{ isEditMode ? '🏠 İlan Düzenle' : '🏠 Bakıcı Profili Oluştur' }}</h1>
      <p>{{ isEditMode ? 'Bakıcılık ilanınızı güncelleyin' : 'Bakıcılık hizmetiniz için ilan oluşturun' }}</p>
    </div>

    <form class="sitter-profile-form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="title">İlan Başlığı *</label>
        <input 
          type="text" 
          id="title" 
          name="title" 
          [(ngModel)]="listingForm.title" 
          required 
          placeholder="İlan başlığını girin">
      </div>

      <div class="form-group">
        <label for="price">Günlük Ücret (TL) *</label>
        <input 
          type="number" 
          id="price" 
          name="price" 
          [(ngModel)]="listingForm.price" 
          required 
          min="0" 
          step="0.01" 
          placeholder="Günlük ücret">
      </div>

      <div class="form-group">
        <label for="location">Konum *</label>
        <input 
          type="text" 
          id="location" 
          name="location" 
          [(ngModel)]="listingForm.location" 
          required 
          placeholder="Şehir/İlçe bilgisi">
      </div>

      <div class="form-group">
        <label for="experience">Deneyim (Yıl)</label>
        <input 
          type="number" 
          id="experience" 
          name="experience" 
          [(ngModel)]="listingForm.experience" 
          min="0" 
          max="50" 
          placeholder="Deneyim yılı">
      </div>

      <div class="form-group">
        <label for="services">Hizmet Türleri</label>
        <textarea 
          id="services" 
          name="services" 
          [(ngModel)]="listingForm.services" 
          rows="2" 
          placeholder="Ev bakıcılığı, günlük bakım, gece bakımı vb."></textarea>
      </div>

      <div class="form-group">
        <label for="description">Hizmet Açıklaması</label>
        <textarea 
          id="description" 
          name="description" 
          [(ngModel)]="listingForm.description" 
          rows="5" 
          placeholder="Deneyimleriniz, özel hizmetleriniz, ev ortamınız hakkında bilgi verin..."></textarea>
      </div>

      <div class="form-group">
        <label for="imageUploads">Ev Fotoğrafları</label>
        <div class="image-upload-container">
          <!-- Mevcut fotoğraflar -->
          <div class="existing-images" *ngIf="listingForm.imageUrls && listingForm.imageUrls.length > 0">
            <div class="image-item" *ngFor="let imageUrl of listingForm.imageUrls; let i = index">
              <img [src]="imageUrl" alt="Ev fotoğrafı" class="preview-image">
              <button type="button" class="remove-image-btn" (click)="removeExistingImage(i)" title="Fotoğrafı kaldır">
                ✕
              </button>
            </div>
          </div>
          
          <!-- Yeni fotoğraf yükleme -->
          <div class="upload-area" *ngIf="selectedFiles.length < 5">
            <input 
              type="file" 
              id="imageUploads" 
              name="imageUploads" 
              (change)="onImagesSelected($event)" 
              accept="image/*"
              multiple
              class="file-input">
            <div class="upload-placeholder">
              <span class="upload-icon">🏠</span>
              <p>Fotoğraf seçmek için tıklayın</p>
              <small>JPG, PNG, GIF (Max: 5MB, En fazla 5 fotoğraf)</small>
            </div>
          </div>
          
          <!-- Seçilen fotoğraflar preview -->
          <div class="selected-images" *ngIf="selectedImages.length > 0">
            <div class="image-item" *ngFor="let image of selectedImages; let i = index">
              <img [src]="image" alt="Seçilen fotoğraf" class="preview-image">
              <button type="button" class="remove-image-btn" (click)="removeSelectedImage(i)" title="Fotoğrafı kaldır">
                ✕
              </button>
            </div>
          </div>
          
          <!-- Upload progress -->
          <div class="upload-progress" *ngIf="uploadProgress > 0 && uploadProgress < 100">
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="uploadProgress"></div>
            </div>
            <span class="progress-text">{{ uploadProgress }}%</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="isActive">Durum</label>
        <select id="isActive" name="isActive" [(ngModel)]="listingForm.isActive">
          <option [ngValue]="true">Aktif</option>
          <option [ngValue]="false">Pasif</option>
        </select>
      </div>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage">
        <div class="error-icon">⚠️</div>
        <p>{{ errorMessage }}</p>
      </div>

      <!-- Success Message -->
      <div class="success-message" *ngIf="successMessage">
        <div class="success-icon">✅</div>
        <p>{{ successMessage }}</p>
      </div>

      <div class="form-buttons">
        <button type="button" class="cancel-btn" (click)="onCancel()">
          İptal
        </button>
        <button type="submit" class="submit-btn" [disabled]="isLoading">
          <span *ngIf="!isLoading">{{ isEditMode ? 'Güncelle' : 'İlan Oluştur' }}</span>
          <span *ngIf="isLoading" class="loading-text">{{ isEditMode ? 'Güncelleniyor...' : 'Oluşturuluyor...' }}</span>
        </button>
      </div>
    </form>
  </div>
</div> 