<div class="profile-container">
  <div class="profile-card">
    <div class="profile-header">
      <div class="logo-container">
        <img src="assets/logo.png" alt="EvPeti Logo" class="logo" (click)="goHome()">
      </div>
      <h1>ğŸ‘¤ Profilim</h1>
      <div class="user-info">
        <h2>{{ user?.name }}</h2>
        <p>{{ user?.email }} | {{ user?.city }}</p>
      </div>
      <button class="refresh-btn" (click)="loadUserData()" title="Yenile" [disabled]="isLoading">
        <span *ngIf="!isLoading">ğŸ”„ Yenile</span>
        <span *ngIf="isLoading">â³ Yenileniyor...</span>
      </button>
    </div>

    <div class="profile-content">
      <!-- Pet Profilleri BÃ¶lÃ¼mÃ¼ -->
      <div class="section">
        <div class="section-header">
          <h3>ğŸ• Pet Profillerim</h3>
          <button class="create-btn" (click)="createPetProfile()">
            + Yeni Pet Profili
          </button>
        </div>
        
        <div class="items-grid" *ngIf="!isLoading">
          <div class="item-card" *ngFor="let pet of pets">
            <div class="item-header">
              <h4>{{ pet.name }}</h4>
              <div class="item-actions">
                <span class="species">{{ pet.species }}</span>
                <div class="action-buttons">
                  <button class="edit-btn" (click)="editPet(pet)" title="DÃ¼zenle">
                    âœï¸
                  </button>
                  <button class="delete-btn" (click)="deletePet(pet.id)" title="Sil">
                    ğŸ—‘ï¸
                  </button>
                </div>
              </div>
            </div>
            <div class="item-details">
              <p><strong>Cins:</strong> {{ pet.breed }}</p>
              <p><strong>YaÅŸ:</strong> {{ pet.age }} yaÅŸÄ±nda</p>
              <p><strong>Cinsiyet:</strong> {{ pet.gender }}</p>
              <p><strong>Kilo:</strong> {{ pet.weight }} kg</p>
              <p *ngIf="pet.healthNotes"><strong>SaÄŸlÄ±k NotlarÄ±:</strong> {{ pet.healthNotes }}</p>
            </div>
          </div>
          
          <div class="empty-state" *ngIf="pets.length === 0">
            <p>HenÃ¼z pet profili oluÅŸturmadÄ±nÄ±z.</p>
            <button class="create-btn" (click)="createPetProfile()">
              Ä°lk Pet Profilinizi OluÅŸturun
            </button>
          </div>
        </div>
      </div>

      <!-- BakÄ±cÄ± Ä°lanlarÄ± BÃ¶lÃ¼mÃ¼ -->
      <div class="section">
        <div class="section-header">
          <h3>ğŸ  BakÄ±cÄ± Ä°lanlarÄ±m</h3>
          <button class="create-btn" (click)="createSitterProfile()">
            + Yeni Ä°lan
          </button>
        </div>
        
        <div class="items-grid" *ngIf="!isLoading">
          <div class="item-card" *ngFor="let listing of listings">
            <div class="item-header">
              <h4>{{ listing.type }}</h4>
              <div class="item-actions">
                <span class="price">{{ listing.price }} â‚º</span>
                <div class="action-buttons">
                  <button class="edit-btn" (click)="editListing(listing)" title="DÃ¼zenle">
                    âœï¸
                  </button>
                  <button class="delete-btn" (click)="deleteListing(listing.id)" title="Sil">
                    ğŸ—‘ï¸
                  </button>
                </div>
              </div>
            </div>
            <div class="item-details">
              <p><strong>Konum:</strong> {{ listing.location }}</p>
              <p><strong>BaÅŸlangÄ±Ã§:</strong> {{ listing.startDate | date:'dd/MM/yyyy' }}</p>
              <p><strong>BitiÅŸ:</strong> {{ listing.endDate | date:'dd/MM/yyyy' }}</p>
              <p><strong>Durum:</strong> 
                <span class="status" [class.active]="listing.isAvailable">
                  {{ listing.isAvailable ? 'Aktif' : 'Pasif' }}
                </span>
              </p>
              <p *ngIf="listing.description"><strong>AÃ§Ä±klama:</strong> {{ listing.description }}</p>
            </div>
          </div>
          
          <div class="empty-state" *ngIf="listings.length === 0">
            <p>HenÃ¼z bakÄ±cÄ± ilanÄ± oluÅŸturmadÄ±nÄ±z.</p>
            <button class="create-btn" (click)="createSitterProfile()">
              Ä°lk Ä°lanÄ±nÄ±zÄ± OluÅŸturun
            </button>
          </div>
        </div>
      </div>

      <!-- Loading State -->
      <div class="loading-state" *ngIf="isLoading">
        <div class="loading-spinner"></div>
        <p>Veriler yÃ¼kleniyor...</p>
      </div>

      <!-- Error State -->
      <div class="error-state" *ngIf="errorMessage">
        <div class="error-icon">âš ï¸</div>
        <h3>BaÄŸlantÄ± HatasÄ±</h3>
        <p>{{ errorMessage }}</p>
        <div class="error-actions">
          <button class="retry-btn" (click)="loadUserData()">Tekrar Dene</button>
          <button class="home-btn" (click)="goHome()">Ana Sayfaya DÃ¶n</button>
        </div>
      </div>
    </div>

    <div class="profile-actions">
      <button class="logout-btn" (click)="logout()">
        Ã‡Ä±kÄ±ÅŸ Yap
      </button>
    </div>
  </div>
</div> 